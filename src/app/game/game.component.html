<div class="flex flex-col" cdkDropListGroup>
    @if(state==="SCHUPF") {
    <div class="flex flex-col items-stretch">
        <div class="h-96 flex flex-row justify-around">
            @for( s of schupf; track s.caption ) {
            <div>
                {{s.caption}}
                <div (cdkDropListDropped)="handleDrop($event)" cdkDropList [cdkDropListData]="s"
                    cdkDropListOrientation="horizontal" class="bg-slate-300 h-[200px] w-[200px] flex">
                    @if(s.card(); as card) {
                    <div cdkDrag [cdkDragData]="card">
                        <app-card [cardcode]="card"></app-card>
                    </div>

                    }

                </div>
            </div>
            }
        </div>
        <div class="flex justify-center">
            <button [disabled]="!schupfFini()" (click)="sendSchupfedCards()" class="btn">Schupf</button>
        </div>
    </div>
    } @else if (state === "SCHUPFED") {
    <div class="flex flex-col items-stretch">
        <div class="h-96 flex flex-row justify-around">
            @for( s of schupfed; track s.caption ) {
            <div>
                {{s.caption}}
                <div class="bg-slate-300 h-[200px] w-[200px] flex">
                    @if(s.card; as card) {
                    <div>
                        <app-card [cardcode]="card"></app-card>
                    </div>
                    }

                </div>
            </div>
            }
        </div>
        <div class="flex justify-center">
            <button (click)="sendSchupfedAck()" class="btn">Ack Schupf</button>
        </div>
    </div>

    }

    <div class="flex flex-row">
        <div class="flex flex-col gap-10">
            <!-- todo: enable / disable buttons -->
            @if(state==="EIGHT_CARDS") {
            <button (click)="sendAckBigTichu()" class="btn">No Big Tichu</button>
            } @else if (state==="PRE_SCHUPF") {
            <button (click)="sendAckTichuBeforeSchupf()" class="btn">No Before Schupf</button>
            } @else if (state==="POST_SCHUPF") {
            <button (click)="sendAckTichuAfterSchupf()" class="btn">No After Schupf</button>
            } @else if (state ==="YOURTURN") {
            <button (click)="playCards()" class="btn">Play Cards</button>

            }

        </div>
        <div class="flex flex-row gap-10 max-w-[100vw]" cdkDropList [cdkDropListData]="displaycards"
            (cdkDropListDropped)="handleDrop($event)" cdkDropListOrientation="horizontal" [formGroup]="fg">
            @for(card of displaycards; track card) {
            <div class="-ml-[150px] first:ml-0" cdkDrag>
                <app-card [formControlName]="card" [cardcode]="card"></app-card>
            </div>
            <!-- {{card|json}} -->
            }
        </div>
    </div>
    @if( state === "GAME" ||state === "YOURTURN" ) {
    <div class="flex flex-wrap">
        @for( e of table; track $index ) {
        <div>
            <h1>{{e.player}}</h1>
            <div class="flex flex-nowrap">
                @for (card of e.cards; track card.code) {
                <app-card [selectable]="false" [cardcode]="card.code" class="-ml-[150px] first:ml-0"></app-card>
                }
            </div>
        </div>
        }
    </div>
    }

    <div>
        <!-- {{points|json}} -->
        <app-gamelog [points]="points"></app-gamelog>
    </div>
</div>