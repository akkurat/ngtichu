<div class="flex flex-col">
    <app-schupf-display [state]="state" [message]="schupfmessage" [gameId]="gameId"></app-schupf-display>
    <div class="flex flex-row">
        <div class="flex flex-col gap-10">
            <!-- todo: enable / disable buttons -->
            @if(state==="EIGHT_CARDS") {
            <button (click)="sendAckBigTichu()" class="btn">No Big Tichu</button>
            } @else if (state==="PRE_SCHUPF") {
            <button (click)="sendAckTichuBeforeSchupf()" class="btn">No Before Schupf</button>
            } @else if (state==="POST_SCHUPF") {
            <button (click)="sendAckTichuAfterSchupf()" class="btn">No After Schupf</button>
            } @else if (state ==="YOURTURN") {
            <button (click)="playCards()" class="btn">Play Cards</button>
            }
            <button (click)="resend()" class="btn">Resend</button>

        </div>
        <div class="flex flex-row gap-10 max-w-[100vw]" cdkDropList [cdkDropListData]="displaycards" id="deckDropTarget" 
        [cdkDropListConnectedTo]="schupfKeys"
            (cdkDropListDropped)="handleDrop($event)" cdkDropListOrientation="horizontal" [formGroup]="fg">
            @for(card of displaycards; track card) {
            <div class="-ml-[150px] first:ml-0" cdkDrag>
                <app-card [formControlName]="card" [cardcode]="card"></app-card>
            </div>
            <!-- {{card|json}} -->
            }
        </div>
    </div>
    @if( state === "GAME" ||state === "YOURTURN" ) {
    @if(lastTrick()){
    <h2>last trick</h2>
    <app-tabledisplay [table]="lastTrick()"></app-tabledisplay>
    }
    <app-tabledisplay [table]="table"></app-tabledisplay>
    }

    <div>
        <!-- {{points|json}} -->
        <app-gamelog [points]="points"></app-gamelog>
    </div>
</div>